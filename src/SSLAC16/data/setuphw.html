<!DOCTYPE html><title>SlSLAC setup HW</title><body bgcolor=#00BEBE><table border=1 style=width:800px><caption>NetWork, Time and HardWare Setup<tr><td style=width:50%><table border=0 style=width:100%><caption><button onclick=fPC()>Sync local PC</button> Time setup <button onclick=ntp()>Sync NTP server</button><tr><td>TimeZone UTC<td><input type=number id=tz max=12 min=-12 step=0.5 onchange='set_save_time("1")'><tr><td>Current Time<td><div id=curTime></table><td style=width:50%><table border=0 style=width:100%><caption>I2C setup<tr><td>SDA GPIO<td><input type=number id=pSDA max=16 min=1 step=1 oninput='set_val("pSDA")'><tr><td>SCL GPIO<td><input type=number id=pSCL max=16 min=1 step=1 oninput='set_val("pSCL")'><tr><td>PWM freq(Hz)<td><input type=number id=pwmFreq max=1500 min=40 step=10 oninput='set_val("pwmFreq")'></table></table><table border=1 style=width:800px><tr><td style=width:50%><table border=0 style=width:100%><caption>WiFi setup: <input type=button value="Scan WiFi"onclick=scan()><tr><td>Hostname<td><div id=hostname></div><tr><td>AP IP address:<td><div id=ipaddr></div><tr><td>Connected to:<td><div id=ssid><td><button onclick=disconnect() id=discon>Disconnect<tr><td>WiFi IP address:<td><div id=wifiipaddr></div><tr><td>Network list<td><select id=wifi></select><td><button onclick=connect()>Connect<tr><td style=width:100%>Hide own WiFi password<td><input type=checkbox id=isHidePassword onchange=_isHidePassword()><tr><td style=width:100%>Disable AP<td><input type=checkbox id=isSoftAPDisabled onchange=_isSoftAPDisabled()><tr><td style=width:100% colspan=3>You can enable AP and/or show password by booting SSLAC with "Flash"/"Emergency light" button pressed</table><td><table border=0 style=width:100%><caption>DS18x20 setup: <input type=button value="Scan Sensors"onclick=scan_sens()> <input type=button value="Clear all Sensors"onclick=clear_sens()><tr><td>#<td>Sensor name:<td>Sensor temperature:<tr><td><div id=index0><td><div id=sname0><td><div id=stemp0><tr><td><div id=index1><td><div id=sname1><td><div id=stemp1><tr><td><div id=index2><td><div id=sname2><td><div id=stemp2><tr><td><div id=index3><td><div id=sname3><td><div id=stemp3><tr><td><div id=index4><td><div id=sname4><td><div id=stemp4><tr><td><div id=index5><td><div id=sname5><td><div id=stemp5><tr><td><div id=index6><td><div id=sname6><td><div id=stemp6><tr><td><div id=index7><td><div id=sname7><td><div id=stemp7></table></table><table border=1 style=width:800px><caption>Files update<tr><td><table><caption>Online Update<tr border=1><td><input type=button value="HTML/JS update"onclick='uHTML("pHTML")'disabled style=width:120px;height:20px><progress id=pHTML max=100 value=0></progress><br><input type=button value="FirmWare update"onclick='uFirmWare("pFirmWare")'disabled style=width:120px;height:20px><progress id=pFirmWare max=100 value=0></progress><br></table><td><table><caption>Offline<tr><td><form action=/upload enctype=multipart/form-data id=fileUpload method=POST><input type=file lang=en name=myfile1 size=20> <input type=submit value=Upload></form></table></table><form><input type=button value=Save onclick=sv()> <input type=button value="Daily Schedule"onclick=home()> <input type=button value="Channels&Group setup"onclick='location.href="1SetUp.html"'> <input type=button value="Emergency light setup"onclick='location.href="EmLight.html"'> <input type=button value="Fan/Temperature setup"onclick='location.href="Fan.html"'> <input type=button value=Setup&Upgrade onclick='location.href="setuphw.html"'disabled> <input type=button value=Reboot onclick=sr() \></form><script src=sslac.js></script><script>var info1,info;set_rest("EmLight=0",_ip);var foundedNet=[],Sensors=[];function getInfo1(){info1=get_rest("info=1",_ip),document.getElementById("pSDA").value=info1[1][0],document.getElementById("pSCL").value=info1[1][1],document.getElementById("pwmFreq").value=info1[1][2],0==info1[2][5]?(document.getElementById("ipaddr").innerHTML=info1[2][3],document.getElementById("wifiipaddr").innerHTML=info1[2][1],document.getElementById("ssid").innerHTML="Not connected",document.getElementById("discon").disabled=!0):(document.getElementById("ipaddr").innerHTML=info1[2][3],document.getElementById("wifiipaddr").innerHTML=info1[2][1],document.getElementById("ssid").innerHTML=info1[2][2],document.getElementById("discon").disabled=!1);var e="";e=info1[0][0]<10?"0"+info1[0][0]+":":info1[0][0]+":",info1[0][1]<10?e+="0"+info1[0][1]+":":e+=info1[0][1]+":",info1[0][2]<10?e+="0"+info1[0][2]:e+=info1[0][2],document.getElementById("curTime").innerHTML=e,document.getElementById("tz").value=(info1[0][3]-127)/10;var t=document.getElementById("fileUpload");"file:///upload"==t.action&&(t.action="http://"+_ip+"/upload"),1==info[6][4]&&(document.getElementById("isHidePassword").checked=!0),1==info[6][5]&&(document.getElementById("isSoftAPDisabled").checked=!0)}function setSensor(){for(i=0;i<info1[3][0];i++)Sensors[i]=get_rest("temp="+i,_ip),document.getElementById("index"+i).innerHTML=Sensors[i][8],document.getElementById("stemp"+i).innerHTML=Sensors[i][9]/1e3,document.getElementById("sname"+i).innerHTML="<input id='_name"+i+"' onchange=\"sensorName(this)\" type='text' value="+Sensors[i][10]+"> "}function sensorName(e){set_rest("temp="+e.id.substring(5)+"&="+e.value,_ip)}function fillNet(){for(var e=document.getElementById("wifi");0!=e.length;)e.remove(e.lengt);for(i=0;i<foundedNet.length;i++){var t=document.createElement("option");t.text=foundedNet[i],t.value=[i],e.add(t)}}function connect(){var e=foundedNet[document.getElementById("wifi").value],t=prompt("Please enter password for "+e+" network");post_rest("ssid="+e+"&passwd="+t,_ip),getInfo1(),getNet()}function scan(){alert("Please wait when scan finished"),scan_wifi()}function scan_wifi(){info1[2][4]=get_rest("wifi=",_ip),getNet()}function getNet(){for(i=0;i<info1[2][4];i++)foundedNet[i]=get_rest("wifi="+i,_ip)[0];foundedNet=array_unique(foundedNet),fillNet()}function disconnect(){get_rest("wifi=disconnect",_ip),getInfo1(),getNet()}function fPC(){var e=new Date;set_rest("time=&h="+e.getHours()+"&m="+e.getMinutes()+"&s="+(e.getSeconds()+1),_ip)}function ntp(){set_rest("time=ntp",_ip)}function set_save_time(e){val=parseFloat(document.getElementById("tz").value),tz=val,val=10*val+127,set_rest("&time=&tz="+val,_ip)}function _isHidePassword(){document.getElementById("isHidePassword").checked?(alert("Dont forget you default password !!!"),set_rest("isHidePassword=1",_ip),info[6][4]=1):(set_rest("isHidePassword=0",_ip),info[6][4]=0)}function _isSoftAPDisabled(){document.getElementById("isSoftAPDisabled").checked?(alert("Dont forget to connect SSLAC to your WiFi network !!!"),set_rest("isSoftAPDisabled=1",_ip),info[6][5]=1):(set_rest("isSoftAPDisabled=0",_ip),info[6][5]=0)}function scan_sens(){set_rest("1wire=rescan",_ip)}function clear_sens(){set_rest("1wire=clear",_ip)}function set_val(e){var t=document.getElementById(e).value;set_rest(e+"="+t,_ip)}function array_unique(e){for(var t=[],n=0;n<e.length;n++)-1==t.indexOf(e[n])&&t.push(e[n]);return t}function set_hn(e){set_rest("hostname="+e.value)}info=get_rest("info=",_ip),document.getElementById("hostname").innerHTML="<input id='_host'type='text' value="+info[1][15]+" onchange=set_hn(this) > ",setInterval(getInfo1,1e3),getInfo1(),getNet(),setSensor()</script>