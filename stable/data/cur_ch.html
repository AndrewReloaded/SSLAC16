<!DOCTYPE html>
<html>
  <head>
    <meta content="text/html; charset=windows-1252" http-equiv="content-type">
    <title>SSLAC16</title>
  </head>
  <body onload="onButton()" bgcolor="#00BEBE">
    <h1>
      <div id="hostname"></div>
    </h1>
    <h5>
      <div id="ver"></div>
    </h5>
    <form action="/" method="get"><input value="&lt;-Back" type="submit"></form>
    <h3>Current channel and sensor value:</h3>
    <div id="info"></div>
    <div id="temp"></div>
    <div id="id01"></div>
    <br>
    <form> <button formmethod="get" formaction="/set_time.html" type="submit">Time
        SetUp</button> <button formmethod="get" formaction="/set_i2c.html" type="submit">I2C
        SetUp</button> <button formmethod="get" formaction="/set_ch.html" type="submit">Channels
        Value</button> <button formmethod="get" formaction="/set_sched.html" type="submit">Channels
        Schedule</button> <button formmethod="get" formaction="/set_wifi.html"
        type="submit">WiFi SetUp</button> </form>
    <script src="sslac.js">  </script>
    <script>
      document.getElementById('ver').innerHTML = get_version();
      set_rest('isSetupCh=0');
 setInterval('onButton()', 1000);
 setInterval('get_Sens()',2000);
 get_info();     
 function onButton(){
        get_channels();
        get_time();
  }
  function get_channels() {
    var arr = get_rest('ch');;
 
    var i;
    var out = '<br><table border="1"><tbody><tr>';
    for(i = 0; i < 8; i++) {
        
      if (arr[i][5]!="") out+='<td>'+arr[i][5]; else {
        out += '<td>CH' + i;
        if (arr[i][4]!=99) out+='(LED)'; else out+='(Fan)';
      }

      
      
              out+='</td><td>'+arr[i][1]+'</td><td><br></td><td>';
      
      if (arr[i+8][5]!="") out+=arr[i+8][5]; else {
          out+='CH'+(i+8);
          if (arr[i+8][4]!=99) out+='(LED)'; else out+='(Fan)';
      }
              out+='</td><td>'+arr[i+8][1]+'</td></tr>'
     
    }
    out += '</tbody></table>';
    document.getElementById('id01').innerHTML = out;
  }
  function get_time() {
    var arr = get_rest('time');
    var i;
    var out = 'Current time: '+arr[0][0]+':';
    if (arr[0][1]<10) out+='0'+arr[0][1]+':'; else out+=arr[0][1]+':';
    if (arr[0][2]<10) out+='0'+arr[0][2];else out+=arr[0][2];
    out+='<br>Uptime: '+arr[1][0]+' days, '+arr[1][1]+' hours, '+arr[1][2]+' minutes, '+arr[1][3]+' seconds';
    document.getElementById('info').innerHTML = out;
  }
      var cSensor;
      var temp_out = '';
      var xmlhttp = new XMLHttpRequest();
  function get_Sens(){
    temp_out='';
    cSensor=get_rest('temp');
    for (i=0; i<cSensor; i++) {
       get_temp(i);
    }
    document.getElementById('temp').innerHTML = temp_out;
 }
      function get_temp(iSens){
              Sensor=get_rest('temp='+iSens);
                temp_out+=Sensor[10]+' at address:'+
                byteToHex(Sensor[0])+':'
                +byteToHex(Sensor[1])+':'
                +byteToHex(Sensor[2])+':'
                +byteToHex(Sensor[3])+':'
                +byteToHex(Sensor[4])+':'
                +byteToHex(Sensor[5])+':'
                +byteToHex(Sensor[6])+':'
                +byteToHex(Sensor[7])+
                ' T='+Sensor[9]/1000+'C<br>';
      }
     function get_info(){
             var _info=get_rest('info');
              
             document.getElementById('hostname').innerHTML=_info[1][15]
             if (_info[1][17]==1) document.getElementById('hostname').innerHTML = _info[1][15]+'(Slave)';
             if (_info[1][16]==1) document.getElementById('hostname').innerHTML = _info[1][15]+'(Master)';
             if ((_info[1][16]==0) & (_info[1][17]==0)) document.getElementById('hostname').innerHTML = _info[1][15];  
}      
      
      </script>
  </body>
</html>
